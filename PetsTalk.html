<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¯µç‰©æºé€šèˆ‡æ›¸ä¿¡é ç´„</title>
    <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <style>
        :root {
            --primary-color: #D87829; /* æš–æ©˜æ£•è‰² */
            --bg-color: #FFF8F0;
            --warning-bg: #FFF3CD;
            --warning-text: #856404;
            --tab-inactive: #e0e0e0;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: var(--bg-color);
            margin: 0;
            padding: 20px 20px 0 20px;
            color: #594a42;
        }
        .container {
            background: white;
            max-width: 500px;
            margin: 0 auto;
            padding: 30px;
            border-radius: 0 0 20px 20px; /* åº•éƒ¨åœ“è§’ï¼Œé ‚éƒ¨ç•™çµ¦ Tab */
            box-shadow: 0 4px 15px rgba(139, 69, 19, 0.1);
            border-top: 8px solid var(--primary-color);
        }
        /* Tab Navigation æ¨£å¼ */
        .tab-nav {
            max-width: 500px;
            margin: 0 auto;
            display: flex;
            background-color: var(--tab-inactive);
            border-radius: 10px 10px 0 0;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        .tab-button {
            flex: 1;
            padding: 15px 10px;
            text-align: center;
            cursor: pointer;
            font-weight: bold;
            color: #594a42;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
        }
        .tab-button.active {
            background-color: white;
            color: var(--primary-color);
            border-bottom: 3px solid var(--primary-color);
        }

        /* å…§å®¹å€å¡Šé€šç”¨æ¨£å¼ */
        h1 {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: var(--primary-color);
            text-align: center;
        }
        p.desc {
            font-size: 0.9rem;
            color: #8c7b75;
            margin-bottom: 25px;
            text-align: center;
        }
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-weight: 600; font-size: 0.95rem; }
        input, textarea { width: 100%; padding: 12px; border: 2px solid #eee; border-radius: 10px; font-size: 1rem; box-sizing: border-box; transition: all 0.3s; background-color: #fff; }
        input:focus, textarea:focus { border-color: var(--primary-color); background-color: #fffbf7; outline: none; }
        .question-label { color: var(--primary-color); }
        .photo-guide { background-color: var(--warning-bg); color: var(--warning-text); padding: 15px; border-radius: 10px; border: 1px solid #ffeeba; margin-bottom: 20px; }
        .photo-guide h3 { margin-top: 0; font-size: 1.1rem; }
        .photo-guide ul { padding-left: 20px; margin-bottom: 10px; font-size: 0.95rem; }
        .checkbox-wrapper { display: flex; align-items: center; margin-top: 10px; font-weight: bold; cursor: pointer; }
        .checkbox-wrapper input { width: 20px; height: 20px; margin-right: 10px; accent-color: var(--primary-color); }
        button { width: 100%; background-color: var(--primary-color); color: white; padding: 15px; border: none; border-radius: 10px; font-size: 1.1rem; font-weight: bold; cursor: pointer; margin-top: 15px; box-shadow: 0 4px 10px rgba(216, 120, 41, 0.3); transition: transform 0.2s; }
        button:hover { transform: translateY(-2px); }
        .tab-content { display: none; } /* é è¨­éš±è—å…§å®¹å€å¡Š */

        /* é›¢ä¸–æºé€šçš„ç‰¹æ®Šæ¨£å¼ */
        .afterlife-note {
            background-color: #f7f3ff;
            border-left: 5px solid #6c5ce7; /* æ›ä¸€å€‹æŸ”å’Œçš„ç´«è‰² */
            padding: 10px;
            margin-bottom: 20px;
            border-radius: 5px;
            font-size: 0.9rem;
            color: #4b3e8e;
        }
    </style>
</head>
<body>
    <div class="tab-nav">
        <div class="tab-button active" id="btn-petComm">ğŸ¾ å¯µç‰©æºé€š</div>
        <div class="tab-button" id="btn-afterlife">ğŸŒˆ é›¢ä¸–æ›¸ä¿¡</div>
    </div>
    <div class="container">
        <div id="petComm" class="tab-content" style="display: block;">
            <h1>ğŸ¾ å¯µç‰©èªªèªªè©±é ç´„è³‡è¨Š</h1>
            <p class="desc">è«‹å¡«å¯«æ¯›å°å­©çš„è³‡è¨Šèˆ‡æ‚¨æƒ³å•çš„å•é¡Œ</p>

            <form id="petCommForm">
                <div class="form-group"><label for="pc_petName">æ¯›å°å­©çš„åå­— <span style="color:red">*</span></label><input type="text" id="pc_petName" placeholder="ä¾‹å¦‚ï¼šé¥…é ­" required></div>
                <div class="form-group"><label for="pc_petSpecies">æ¯›å°å­©çš„ç¨®é¡ <span style="color:red">*</span></label><input type="text" id="pc_petSpecies" placeholder="ä¾‹å¦‚ï¼šæ³¢æ–¯è²“ã€æ‹‰å¸ƒæ‹‰å¤šã€å€‰é¼ " required></div>
                <div class="form-group"><label for="pc_petAge">æ¯›å°å­©çš„å¹´é½¡ <span style="color:red">*</span></label><input type="text" id="pc_petAge" placeholder="ä¾‹å¦‚ï¼š3æ­²ã€5å€‹æœˆ" required></div>
                <div class="form-group"><label for="pc_ownerTitle">æ‚¨çš„ç¨±è¬‚ <span style="color:red">*</span></label><input type="text" id="pc_ownerTitle" placeholder="ä¾‹å¦‚ï¼šåª½åª½ã€å§å§ã€ä¸»äºº" required></div>
                <hr style="border: 0; border-top: 1px dashed #ddd; margin: 25px 0;">
                <div class="form-group"><label for="pc_q1" class="question-label">å•é¡Œä¸€ <span style="color:red">*</span></label><input type="text" id="pc_q1" placeholder="è«‹è¼¸å…¥æƒ³å•çš„ç¬¬ä¸€å€‹å•é¡Œ" required></div>
                <div class="form-group"><label for="pc_q2" class="question-label">å•é¡ŒäºŒ</label><input type="text" id="pc_q2" placeholder="è«‹è¼¸å…¥æƒ³å•çš„ç¬¬äºŒå€‹å•é¡Œ (é¸å¡«)"></div>
                <div class="form-group"><label for="pc_q3" class="question-label">å•é¡Œä¸‰</label><input type="text" id="pc_q3" placeholder="è«‹è¼¸å…¥æƒ³å•çš„ç¬¬ä¸‰å€‹å•é¡Œ (é¸å¡«)"></div>
                <div class="form-group"><label for="pc_note">å‚™è¨»èªªæ˜</label><textarea id="pc_note" rows="3" placeholder="é‚„æœ‰ä»€éº¼éœ€è¦è£œå……çš„å—ï¼Ÿ"></textarea></div>

                <div class="photo-guide">
                    <h3>ğŸ“· ç…§ç‰‡æº–å‚™æé†’</h3>
                    <p>è«‹æº–å‚™ <strong>6 å¼µ</strong> åŠå¹´å…§çš„ç…§ç‰‡ï¼Œé€å‡ºè¡¨å–®å¾Œè«‹åœ¨èŠå¤©å®¤å‚³é€ã€‚</p>
                    <ul>
                        <li><strong>æ˜é¡¯çš„ç³å­”ç…§ç‰‡</strong> (çœ¼ç›è¦æ¸…æ¥šã€ä¸è¦æœ‰æ¿¾é¡)</li>
                        <li><strong>è‡³å°‘å…©å¼µèƒŒè„Šæˆ–å°¾å·´ç…§ç‰‡</strong></li>
                    </ul>
                    <label class="checkbox-wrapper"><input type="checkbox" id="pc_photo_check" required> æˆ‘å·²æº–å‚™å¥½ç…§ç‰‡ï¼Œç¨å¾Œç™¼é€</label>
                </div>
                <button type="submit" id="pc_submitBtn">é€å‡ºå¯µç‰©æºé€šé ç´„å–® ğŸ’Œ</button>
            </form>
        </div>

        <div id="afterlifeComm" class="tab-content">
            <h1>ğŸŒˆ é›¢ä¸–æºé€šæ›¸ä¿¡</h1>
            <p class="desc">è«‹å¡«å¯«æ¯›å°å­©çš„è³‡æ–™èˆ‡æ‚¨æƒ³å‚³é”çµ¦ç¥‚çš„è¨Šæ¯</p>

            <form id="afterlifeForm">
                <div class="afterlife-note">
                    è«‹æ³¨æ„ï¼Œé›¢ä¸–æ›¸ä¿¡æœå‹™åƒ…æä¾›çµ¦é›¢ä¸–ä¸‰é€±ä»¥ä¸Šçš„æ¯›å°å­©ã€‚
                </div>

                <div class="form-group"><label for="ac_petName">æ¯›å°å­©çš„åå­— <span style="color:red">*</span></label><input type="text" id="ac_petName" placeholder="ä¾‹å¦‚ï¼šé¥…é ­" required></div>
                <div class="form-group"><label for="ac_petSpecies">æ¯›å°å­©çš„ç¨®é¡ <span style="color:red">*</span></label><input type="text" id="ac_petSpecies" placeholder="ä¾‹å¦‚ï¼šæ³¢æ–¯è²“ã€æ‹‰å¸ƒæ‹‰å¤šã€å€‰é¼ " required></div>
                <div class="form-group"><label for="ac_petAge">æ¯›å°å­©çš„å¹´é½¡ <span style="color:red">*</span></label><input type="text" id="ac_petAge" placeholder="ä¾‹å¦‚ï¼šäº«å¹´ 12 æ­²" required></div>
                
                <div class="form-group">
                    <label for="ac_datePassed">é›¢ä¸–æ—¥æœŸ/æ™‚é–“ <span style="color:red">*</span></label>
                    <input type="text" id="ac_datePassed" placeholder="ä¾‹å¦‚ï¼š2025/11/01 æˆ– å¤§ç´„åŠå¹´å‰" required>
                </div>

                <div class="form-group"><label for="ac_ownerTitle">æ‚¨çš„ç¨±è¬‚ <span style="color:red">*</span></label><input type="text" id="ac_ownerTitle" placeholder="ä¾‹å¦‚ï¼šåª½åª½ã€å§å§ã€ä¸»äºº" required></div>
                <hr style="border: 0; border-top: 1px dashed #ddd; margin: 25px 0;">
                
                <div class="form-group"><label for="ac_q1" class="question-label">å‚³é”è¨Šæ¯ä¸€ <span style="color:red">*</span></label><input type="text" id="ac_q1" placeholder="æ‚¨æœ€æƒ³å•æˆ–æƒ³å‘Šè¨´ç¥‚çš„ç¬¬ä¸€å¥è©±" required></div>
                <div class="form-group"><label for="ac_q2" class="question-label">å‚³é”è¨Šæ¯äºŒ</label><input type="text" id="ac_q2" placeholder="æ‚¨æƒ³å•æˆ–æƒ³å‘Šè¨´ç¥‚çš„ç¬¬äºŒå¥è©± (é¸å¡«)"></div>
                <div class="form-group"><label for="ac_q3" class="question-label">å‚³é”è¨Šæ¯ä¸‰</label><input type="text" id="ac_q3" placeholder="æ‚¨æƒ³å•æˆ–æƒ³å‘Šè¨´ç¥‚çš„ç¬¬ä¸‰å¥è©± (é¸å¡«)"></div>
                <div class="form-group"><label for="ac_note">å‚™è¨»èªªæ˜</label><textarea id="ac_note" rows="3" placeholder="é‚„æœ‰ä»€éº¼éœ€è¦è£œå……çš„å—ï¼Ÿ"></textarea></div>

                <div class="photo-guide">
                    <h3>ğŸ“· ç…§ç‰‡æº–å‚™æé†’ (é›¢ä¸–å‰)</h3>
                    <p>è«‹æº–å‚™ <strong>6 å¼µ</strong> æ¯›å°å­©çš„æ¸…æ™°ç…§ç‰‡ï¼Œç¨å¾Œåœ¨èŠå¤©å®¤å‚³é€ã€‚</p>
                    <ul>
                        <li><strong>æ˜é¡¯çš„ç³å­”ç…§ç‰‡</strong> (çœ¼ç›è¦æ¸…æ¥šã€ä¸è¦æœ‰æ¿¾é¡)</li>
                        <li><strong>è‡³å°‘å…©å¼µèƒŒè„Šæˆ–å°¾å·´ç…§ç‰‡</strong></li>
			<li><strong>å¦‚æœæœ‰ä»»ä½•ä»–å–œæ­¡çš„ç©å…·ã€é›¶é£Ÿï¼Œæˆ–è€…ç”Ÿå‰æƒ³åƒå»ä¸èƒ½åƒçš„é£Ÿç‰©ï¼Œä¹Ÿè«‹æº–å‚™ç…§ç‰‡</strong></li>
                    </ul>
                    <label class="checkbox-wrapper"><input type="checkbox" id="ac_photo_check" required> æˆ‘å·²æº–å‚™å¥½ç…§ç‰‡ï¼Œç¨å¾Œç™¼é€</label>
                </div>

                <button type="submit" id="ac_submitBtn">é€å‡ºé›¢ä¸–æ›¸ä¿¡é ç´„å–® ğŸ’Œ</button>
            </form>
        </div>
        <div id="status"></div>
    </div>

    <script>
        // â˜…â˜…â˜… éƒ¨ç½²æ™‚å¡«å…¥ä½ çš„ LIFF ID â˜…â˜…â˜…
        const YOUR_LIFF_ID = "è«‹åœ¨æ­¤å¡«å…¥ä½ çš„LIFF_ID"; 

        // ====== Tab åˆ‡æ›é‚è¼¯ ======
        function switchTab(tabId) {
            // éš±è—æ‰€æœ‰å…§å®¹
            document.querySelectorAll('.tab-content').forEach(content => {
                content.style.display = 'none';
            });
            // ç§»é™¤æ‰€æœ‰æŒ‰éˆ•çš„ active ç‹€æ…‹
            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active');
            });

            // é¡¯ç¤ºç›®æ¨™å…§å®¹ä¸¦å•Ÿç”¨æŒ‰éˆ•
            document.getElementById(tabId).style.display = 'block';
            document.getElementById('btn-' + tabId.replace('Comm', '')).classList.add('active');
        }

        document.getElementById('btn-petComm').addEventListener('click', () => switchTab('petComm'));
        document.getElementById('btn-afterlife').addEventListener('click', () => switchTab('afterlifeComm'));


        // ====== LIFF åˆå§‹åŒ– ======
        document.addEventListener('DOMContentLoaded', function() {
            liff.init({ liffId: YOUR_LIFF_ID })
                .catch((err) => { console.log("LIFF åˆå§‹åŒ–ç­‰å¾…ä¸­..."); });
        });

        // ====== å¯µç‰©æºé€šè¡¨å–®é€å‡º (Tab 1) ======
        document.getElementById('petCommForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const prefix = 'pc_';
            const petName = document.getElementById(prefix + 'petName').value;
            const petSpecies = document.getElementById(prefix + 'petSpecies').value;
            const petAge = document.getElementById(prefix + 'petAge').value;
            const ownerTitle = document.getElementById(prefix + 'ownerTitle').value;
            const q1 = document.getElementById(prefix + 'q1').value;
            const q2 = document.getElementById(prefix + 'q2').value || "ï¼ˆç„¡ï¼‰";
            const q3 = document.getElementById(prefix + 'q3').value || "ï¼ˆç„¡ï¼‰";
            const note = document.getElementById(prefix + 'note').value || "ï¼ˆç„¡ï¼‰";

            const messageText = `ã€ğŸ¾ å¯µç‰©èªªèªªè©±é ç´„ã€‘\n\nğŸ¶ æ¯›å­©ï¼š${petName} (${petSpecies}, ${petAge})\nğŸ‘¤ å®¶é•·ï¼š${ownerTitle}\n\nâ“ å•é¡Œä¸€ï¼š${q1}\nâ“ å•é¡ŒäºŒï¼š${q2}\nâ“ å•é¡Œä¸‰ï¼š${q3}\n\nğŸ“ å‚™è¨»ï¼š${note}\n\n------------------\nğŸ“¸ ç‹€æ…‹ï¼šå®¶é•·å·²æº–å‚™å¥½ 6 å¼µç…§ç‰‡ï¼ˆå«ç³å­”/èƒŒè„Šï¼‰ï¼Œç¨å¾Œç™¼é€ã€‚`;
            
            sendLiffMessage(messageText);
        });

        // ====== é›¢ä¸–æºé€šè¡¨å–®é€å‡º (Tab 2) ======
        document.getElementById('afterlifeForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const prefix = 'ac_';
            const petName = document.getElementById(prefix + 'petName').value;
            const petSpecies = document.getElementById(prefix + 'petSpecies').value;
            const petAge = document.getElementById(prefix + 'petAge').value;
            const datePassed = document.getElementById(prefix + 'datePassed').value; // é›¢ä¸–æ—¥æœŸ
            const ownerTitle = document.getElementById(prefix + 'ownerTitle').value;
            const q1 = document.getElementById(prefix + 'q1').value;
            const q2 = document.getElementById(prefix + 'q2').value || "ï¼ˆç„¡ï¼‰";
            const q3 = document.getElementById(prefix + 'q3').value || "ï¼ˆç„¡ï¼‰";
            const note = document.getElementById(prefix + 'note').value || "ï¼ˆç„¡ï¼‰";

            const messageText = `ã€ğŸŒˆ é›¢ä¸–æºé€šæ›¸ä¿¡ã€‘\n\nğŸ•Šï¸ åå­—ï¼š${petName} (${petSpecies}, ${petAge})\nğŸ—“ï¸ é›¢ä¸–ï¼š${datePassed}\nğŸ‘¤ å®¶é•·ï¼š${ownerTitle}\n\nğŸ’Œ è¨Šæ¯ä¸€ï¼š${q1}\nğŸ’Œ è¨Šæ¯äºŒï¼š${q2}\nğŸ’Œ è¨Šæ¯ä¸‰ï¼š${q3}\n\nğŸ“ å‚™è¨»ï¼š${note}\n\n------------------\nğŸ“¸ ç‹€æ…‹ï¼šå®¶é•·å·²æº–å‚™å¥½ 6 å¼µç”Ÿå‰ç…§ç‰‡ï¼Œç¨å¾Œç™¼é€ã€‚`;
            
            sendLiffMessage(messageText);
        });

        // ====== çµ±ä¸€è¨Šæ¯ç™¼é€å‡½æ•¸ ======
        function sendLiffMessage(message) {
            if (liff.isInClient()) {
                liff.sendMessages([{
                    type: 'text',
                    text: message
                }]).then(() => {
                    liff.closeWindow();
                }).catch((err) => {
                    window.alert('è¨Šæ¯ç™¼é€å¤±æ•—ï¼š' + err);
                });
            } else {
                window.alert('âœ… æ¸¬è©¦æˆåŠŸï¼LINE æœƒé¡¯ç¤ºçš„è¨Šæ¯ï¼š\n\n' + message);
            }
        }
    </script>
</body>
</html>